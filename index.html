<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ UIS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* –ë–∞–∑–æ–≤–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è */
.input-wrapper {
  display: flex;
  justify-content: center;
}

    body {
      font-family: Arial, sans-serif;
      background-color: #eef5ff;
      margin: 0;
      padding: 0;
      color: #222;
    }
.cost-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  margin: 20px 0;
}
.spacer {
  width: 100px; /* —Ç–∞–∫–æ–π –∂–µ —à–∏—Ä–∏–Ω—ã, –∫–∞–∫ –∏ –∫–Ω–æ–ø–∫–∞ */
}

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px 15px;
    }

    h2 {
      text-align: center;
      font-size: 20px;
      color: #005bb5;
      margin-top: 25px;
      margin-bottom: 20px;
    }

    .calc-block {
      background: #fff5cc;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      padding: 20px;
      transition: all 0.3s ease;
    }

    .calc-row {
      display: grid;
      grid-template-columns: 28% 26% 23% 23%;
      gap: 10px;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }

    .calc-row-header {
      font-weight: bold;
      text-align: center;
      border-bottom: 2px solid #ccc;
    }

    .calc-row .label {
      text-align: left;
      font-weight: 500;
      position: relative;
    }

    .info-icon {
      display: inline-block;
      margin-left: 6px;
      font-weight: bold;
      color: #005bb5;
      cursor: pointer;
      font-style: normal;
    }

    .tooltip {
      display: none;
      position: absolute;
      left: 20px;
      top: 100%;
      z-index: 999;
      background: #ffffff;
      color: #333;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 10px;
      max-width: 300px;
	    width: max-content;
      white-space: normal;
      font-size: 13px;
      text-align: left;
  transition: opacity 0.3s ease;
  opacity: 0;
  visibility: hidden;
    }

    .info-icon:hover + .tooltip {
        display: block;
  opacity: 1;
  visibility: visible;
    }

    .input-wrapper {
  display: flex;
  justify-content: center;
}

input[type="number"] {
  width: 80px;
  padding: 6px 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  text-align: center;
  font-size: 14px;
  box-sizing: border-box;
}

input[type="number"][data-empty="true"] {
  color: #aaa !important;
  font-style: italic;
}
input[type="number"]::placeholder {
  color: #aaa;
  font-style: italic;
}
	  
select {
  padding: 6px 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
  margin-left:25px;
  margin-right:25px;
  font-size: 14px;
  text-align: center;
	text-align-last: center; 
}



    select, input[type="checkbox"] {
      width: 100%;
    }

    .result-block {
      background: #d7e7ff;
      border: 2px solid #005bb5;
      border-radius: 12px;
      padding: 20px;
      margin-top: 15px;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }

    .btn-group {

      gap: 10px;
      align-items:right;
  display: flex;
  justify-content: flex-end;
  margin-top: 20px;
    }

    .btn {
      background: linear-gradient(to bottom, #007bff, #005bb5);
      color: white;
      border: none;
margin-left: auto;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
border-radius: 12px;
  font-weight: 600;
  padding: 6px 12px;
  font-size: 14px;
  box-shadow: 0 2px 8px rgba(0,91,181,0.2);
    }

    .btn:hover {
      background: linear-gradient(to bottom, #005bb5, #007bff);
      box-shadow: 0 0 5px rgba(0, 91, 181, 0.4);
    }

    .red-text {
      color: #d02828;
      font-weight: bold;
    }

    .expert-toggle {
      color: #005bb5;
      cursor: pointer;
      margin-top: 10px;
      display: inline-block;
      font-weight: bold;
    }

    .expert-group {
      display: none;
      margin-top: 10px;
    }

    .expert-group.visible {
      display: block;
    }

    /* –°–∫—Ä—ã—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–æ–ª–æ–Ω–æ–∫ */
@media (max-width: 768px) {
  .calc-row-header {
    display: none !important;
  }

  .calc-row {
    display: block;
    border-bottom: 1px solid #eee;
    padding: 15px 10px;
  }

  .calc-row .label {
    font-weight: bold;
    margin-bottom: 6px;
    text-align: center;
	  display: block;
  width: 100%;
  }

  .calc-row .input-wrapper,
  .calc-row select,
  .calc-row input[type="number"],
  .calc-row input[type="checkbox"] {
    margin-bottom: 10px;
    width: 100%;
  }

  .calc-row > div:not(.label):not(.input-wrapper) {
    display: flex;
    justify-content: space-between;
    padding: 2px 0;
    font-size: 14px;
  }

  .calc-row > div[id^="cost-"]:not(:empty)::before {
    content: "–°—Ç–æ–∏–º–æ—Å—Ç—å: ";
    font-weight: 500;
  }

  .calc-row > div[id^="limit-"]:not(:empty)::before  {
    content: "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ: ";
    font-weight: 500;
  }
}
#cost-TarifFMC,
#limit-TarifFMC,
#cost-RegionDostavki,
#limit-RegionDostavki {
  display: none !important;
}

  </style>
</head>
<body>
  <div class="container">
    <!-- –ü–µ—Ä–≤—ã–π –±–ª–æ–∫ –æ–ø—Ü–∏–π -->
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –í–ê–¢–° –∏ –Ω–æ–º–µ—Ä–æ–≤</h2>
    <div class="calc-block" id="block-vats" style="background: #d6eaff;">
      <div class="calc-row calc-row-header">
        <div>–û–ø—Ü–∏—è</div>
        <div>–í—ã–±–æ—Ä</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        <div>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</div>
      </div>
<!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç —Å—Ç—Ä–æ–∫–∏ –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø—ã -->
<div class="calc-row" data-id="VATS" align="center">
  <div class="label"><strong>–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ê–¢–°</strong>
    <span class="info-icon">i</span>
    <div class="tooltip">
      –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: <br>
      -–∏–Ω—Ñ. —Å–æ–æ–±—â–µ–Ω–∏–µ <br>
      -–º–µ–Ω—é <br>
      -–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è –Ω–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏ –≥—Ä—É–ø–ø—É <br>
      -—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –≥—Ä–∞—Ñ–∏–∫–∞–º <br>
      -—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏–∑ CRM <br><br>
      –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤: <br>
      -–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É <br>
      -–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ <br><br>
      –î–æ 3 –Ω–æ–º–µ—Ä–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ <br>(—Å–∏–ø/–ª–∏—á–Ω—ã–π/FMC). <br>
      –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê–û–ù–∞–º–∏. <br>
      –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞.
    </div>
  </div>
  <div><input type="checkbox" id="VATS" onchange="runCascade('VATS')"></div>

  <div id="cost-VATS">0</div>
  <div id="limit-VATS"></div>
</div>

<div class="calc-row" align="center">
  <div class="label">–í–ê–¢–° Pro (–º–∞–∫—Å–∏–º—É–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)
    <span class="info-icon">i</span>
    <div class="tooltip">
      –í–°–ï —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤: <br>
      -–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ <br>
      -–ø–æ —Å–ø–∏—Å–∫–∞–º –ê–û–ù–æ–≤ <br>
      -–ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ CRM <br>
      -–ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º/–Ω–æ–º–µ—Ä—É/—Å–µ–≥–º–µ–Ω—Ç–∞–º. –∏ –ø—Ä. <br>
      -–ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º <br>
      -—É—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –∫–æ–ª-–≤—É –∏–ª–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ <br>
      -–Ω–µ –∑–≤–æ–Ω–∏—Ç—å —Ä–∞–Ω–µ–µ, —á–µ–º —á–µ—Ä–µ–∑ <br>
      -–∫–æ–ª–∞–∞—É—Ç <br>
      -–∫–æ–ª–ª–±–µ–∫ <br><br>
      –î–æ–ø. —Ñ—É–Ω–∫—Ü–∏–∏: <br>
      -—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê–û–ù–∞–º–∏ <br>
      -–æ–ø—Ü–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ <br>
      -—Ç—Ä–µ–Ω–µ—Ä <br><br>
      - –¥–æ 6 –Ω–æ–º–µ—Ä–æ–≤ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ <br>
      - SIPURI - –∫–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å 2
    </div>
  </div>
  <div><input type="checkbox" id="VATSPRO" onchange="runCascade('VATSPRO')"></div>
  <div id="cost-VATSPRO">0</div>
  <div id="limit-VATSPRO"></div>
</div>
<div class="calc-row" align="center">
  <div class="label">–ö–æ–ª-–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –í–ê–¢–°</div>
  <div class="input-wrapper"><input type="number" id="KolvoSotrudnikovVATS" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSotrudnikovVATS')"></div>
  <div id="cost-KolvoSotrudnikovVATS"></div>
  <div id="limit-KolvoSotrudnikovVATS">0</div>
</div>

<div class="calc-row" align="center">
  <div class="label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –í–ê–¢–°</div>
  <div class="input-wrapper">
    <select id="DlitelnostHraneniyaVATS" onchange="runCascade('DlitelnostHraneniyaVATS')">
      <option value="0">0</option>
      <option value="1 –Ω–µ–¥–µ–ª—è">1 –Ω–µ–¥–µ–ª—è</option>
      <option value="1 –º–µ—Å—è—Ü">1 –º–µ—Å—è—Ü</option>
      <option value="3 –º–µ—Å—è—Ü–∞">3 –º–µ—Å—è—Ü–∞</option>
      <option value="6 –º–µ—Å—è—Ü–µ–≤">6 –º–µ—Å—è—Ü–µ–≤</option>
      <option value="1 –≥–æ–¥">1 –≥–æ–¥</option>
      <option value="2 –≥–æ–¥–∞">2 –≥–æ–¥–∞</option>
      <option value="4 –≥–æ–¥–∞">4 –≥–æ–¥–∞</option>
    </select>
  </div>
  <div id="cost-DlitelnostHraneniyaVATS"></div>
  <div id="limit-DlitelnostHraneniyaVATS">0</div>
</div>
<div class="calc-row" data-id="NomeraVATS" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –Ω–æ–º–µ—Ä–æ–≤ UIS - –ì–æ—Ä–æ–¥—Å–∫–∏–µ/–ú–æ–±–∏–ª—å–Ω—ã–µ</div>
  <div class="input-wrapper">
    <input type="number" id="NomeraVATS" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('NomeraVATS')">
  </div>
  <div id="cost-NomeraVATS">0</div>
  <div id="limit-NomeraVATS"></div>
</div>
<div class="calc-row" data-id="NomeraVATS8800" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –Ω–æ–º–µ—Ä–æ–≤ UIS - 8800
    <span class="info-icon">i</span>
    <div class="tooltip">700—Ä. - –º–∏–Ω. —Å—á–µ—Ç, —Ä–∞—Å—Ö–æ–¥—É–µ—Ç—Å—è –Ω–∞ –∑–≤–æ–Ω–∫–∏</div>
  </div>
  <div class="input-wrapper">
    <input type="number" id="NomeraVATS8800" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('NomeraVATS8800')">
  </div>
  <div id="cost-NomeraVATS8800">0</div>
  <div id="limit-NomeraVATS8800"></div>
</div>

<div class="calc-row" data-id="KolvoSvoihNomerov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ c—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –Ω–æ–º–µ—Ä–æ–≤
    <span class="info-icon">i</span>
    <div class="tooltip">
      –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Å–≤–æ–µ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, <br>
      –µ—Å–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç SIP-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å –∏ —Ö–æ—Å—Ç)
    </div>
  </div>
  <div class="input-wrapper">
    <input type="number" id="KolvoSvoihNomerov" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSvoihNomerov')">
  </div>
  <div id="cost-KolvoSvoihNomerov">0</div>
  <div id="limit-KolvoSvoihNomerov"></div>
</div>

<div class="calc-row" data-id="KolvoFMC" align="center">
  <div class="label">–ö–æ–ª-–≤–æ —Å–∏–º –∫–∞—Ä—Ç
    <span class="info-icon">i</span>
    <div class="tooltip">–ü–æ—Ä—Ç–∞—Ü–∏—è —Å–≤–æ–∏—Ö –Ω–æ–º–µ—Ä–æ–≤ - 0 —Ä—É–±. (—Ç–æ–ª—å–∫–æ —Å–∏–º –ú–°–ö –∏ –æ–±–ª.)</div>
  </div>
  <div class="input-wrapper">
    <input type="number" id="KolvoFMC" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoFMC')">
  </div>
  <div id="cost-KolvoFMC">0</div>
  <div id="limit-KolvoFMC"></div>
</div>

<div class="calc-row" align="center">
  <div class="label">–¢–∞—Ä–∏—Ñ FMC —Å–∏–º –∫–∞—Ä—Ç</div>
  <div class="input-wrapper">
    <select id="TarifFMC" onkeydown="handleEnter(event)" onchange="runCascade('TarifFMC')">
      <option value="–Ω–µ—Ç">–Ω–µ—Ç</option>
      <option value="200 –º–∏–Ω—É—Ç, 1–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞">200 –º–∏–Ω—É—Ç, 1–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</option>
      <option value="600 –º–∏–Ω—É—Ç, 5–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞">600 –º–∏–Ω—É—Ç, 5–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</option>
      <option value="800 –º–∏–Ω—É—Ç, 10–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞">800 –º–∏–Ω—É—Ç, 10–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</option>
      <option value="2000 –º–∏–Ω—É—Ç, 20–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞">2000 –º–∏–Ω—É—Ç, 20–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</option>
      <option value="15 –º–∏–Ω—É—Ç, 0,2–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞">15 –º–∏–Ω—É—Ç, 0,2–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</option>
    </select>
  </div>
  <div id="cost-TarifFMC"></div>
  <div id="limit-TarifFMC"></div>
</div>

<div class="calc-row" align="center">
  <div class="label">–†–µ–≥–∏–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ (—Ä–∞–∑–æ–≤–æ –∑–∞ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å)</div>
  <div class="input-wrapper">
    <select id="RegionDostavki" onkeydown="handleEnter(event)" onchange="runCascade('RegionDostavki')">
      <option value="–Ω–µ—Ç">–Ω–µ—Ç</option>
      <option value="–ú–æ—Å–∫–≤–∞ –∏ –º—Å–∫. –æ–±–ª.">–ú–æ—Å–∫–≤–∞ –∏ –º—Å–∫. –æ–±–ª.</option>
      <option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –ª–µ–Ω. –æ–±–ª.">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –ª–µ–Ω. –æ–±–ª.</option>
      <option value="–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –†–æ—Å—Å–∏—è, –ü–æ–≤–æ–ª–∂—å–µ">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –†–æ—Å—Å–∏—è, –ü–æ–≤–æ–ª–∂—å–µ</option>
      <option value="–Æ–≥, –£—Ä–∞–ª, –°–∏–±–∏—Ä—å">–Æ–≥, –£—Ä–∞–ª, –°–∏–±–∏—Ä—å</option>
      <option value="–î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫">–î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫</option>
    </select>
  </div>
  <div id="cost-RegionDostavki"></div>
  <div id="limit-RegionDostavki"></div>
</div>

<div class="calc-row" data-id="NomeraVATSVsego" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –Ω–æ–º–µ—Ä–æ–≤ UIS –≤—Å–µ–≥–æ</div>
  <div class="input-wrapper">
    <input type="number" id="NomeraVATSVsego" value="0" disabled>
  </div>
  <div id="cost-NomeraVATSVsego"></div>
  <div id="limit-NomeraVATSVsego">0</div>
</div>


    </div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö –æ–ø—Ü–∏–π -->
    <div class="expert-toggle" onclick="toggleExpert()" style="font-size: 14px">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –í–ê–¢–° (–ø–æ–∫–∞–∑–∞—Ç—å)</div>
    <div class="calc-block expert-group" id="block-expert" style="background: #e6f2ff;">
      <div class="calc-row calc-row-header">
        <div>–û–ø—Ü–∏—è</div>
        <div>–í—ã–±–æ—Ä</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        <div>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</div>
      </div>
<div class="calc-row" data-id="LiniyGrupovogoVizova" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –ª–∏–Ω–∏–π –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –≤—ã–∑–æ–≤–∞</div>
  <div class="input-wrapper">
    <input type="number" id="LiniyGrupovogoVizova" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('LiniyGrupovogoVizova')">
  </div>
  <div id="cost-LiniyGrupovogoVizova"></div>
  <div id="limit-LiniyGrupovogoVizova">0</div>
</div>

<div class="calc-row" data-id="LiniyIshodyashihZvonkov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –ª–∏–Ω–∏–π –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤</div>
  <div class="input-wrapper">
    <input type="number" id="LiniyIshodyashihZvonkov" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('LiniyIshodyashihZvonkov')">
  </div>
  <div id="cost-LiniyIshodyashihZvonkov"></div>
  <div id="limit-LiniyIshodyashihZvonkov">0</div>
</div>
<div class="calc-row" data-id="KolvoSIPTrankov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ SIP-—Ç—Ä–∞–Ω–∫–æ–≤</div>
  <div class="input-wrapper">
    <input type="number" id="KolvoSIPTrankov" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSIPTrankov')">
  </div>
  <div id="cost-KolvoSIPTrankov">0</div>
  <div id="limit-KolvoSIPTrankov"></div>
</div>

<div class="calc-row" data-id="KanalnostSIPTrankov" align="center">
  <div class="label">–ö–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å SIP-—Ç—Ä–∞–Ω–∫–æ–≤</div>
  <div class="input-wrapper">
    <select id="KanalnostSIPTrankov" onkeydown="handleEnter(event)" onchange="runCascade('KanalnostSIPTrankov')">
      <option value="0">0</option>
      <option value="30">30</option>
      <option value="60">60</option>
      <option value="90">90</option>
      <option value="180">180</option>
    </select>
  </div>
  <div id="cost-KanalnostSIPTrankov"></div>
  <div id="limit-KanalnostSIPTrankov">0</div>
</div>
<div class="calc-row" data-id="KolvoSIPURI" align="center">
  <div class="label">–ö–æ–ª-–≤–æ SIPURI</div>
  <div class="input-wrapper">
    <input type="number" id="KolvoSIPURI" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSIPURI')">
  </div>
  <div id="cost-KolvoSIPURI">0</div>
  <div id="limit-KolvoSIPURI"></div>
</div>

<div class="calc-row" data-id="KolvoSIPAkkauntov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ SIP-–∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
  <div class="input-wrapper">
    <input type="number" id="KolvoSIPAkkauntov" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSIPAkkauntov')">
  </div>
  <div id="cost-KolvoSIPAkkauntov">0</div>
  <div id="limit-KolvoSIPAkkauntov"></div>
</div>
<div class="calc-row" data-id="KanalnostSIPAkkauntov" align="center">
  <div class="label">–ö–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å SIP-–∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
  <div class="input-wrapper">
    <select id="KanalnostSIPAkkauntov" onkeydown="handleEnter(event)" onchange="runCascade('KanalnostSIPAkkauntov')">
      <option value="0">0</option>
      <option value="30">30</option>
      <option value="60">60</option>
      <option value="90">90</option>
      <option value="180">180</option>
    </select>
  </div>
  <div id="cost-KanalnostSIPAkkauntov"></div>
  <div id="limit-KanalnostSIPAkkauntov">0</div>
</div>



    </div>

    <!-- –í—Ç–æ—Ä–æ–π –±–ª–æ–∫ -->
    <h2>–û–ú–ù–ò –ß–∞—Ç—ã</h2>
    <div class="calc-block" id="block-omni" style="background: #e2f4e6;">
      <div class="calc-row calc-row-header">
        <div>–û–ø—Ü–∏—è</div>
        <div>–í—ã–±–æ—Ä</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        <div>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</div>
      </div>
<div class="calc-row" data-id="OMNI" align="center">
  <div class="label"><strong>–û–ú–ù–ò –ß–∞—Ç—ã</strong></div>
  <div class="input-wrapper">
    <input type="checkbox" id="OMNI" onchange="runCascade('OMNI')">
  </div>
  <div id="cost-OMNI">0</div>
  <div id="limit-OMNI"></div>
</div>

<div class="calc-row" data-id="KolvoSotrudnikovOMNI" align="center">
  <div class="label">–ö–æ–ª-–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –û–ú–ù–ò –ß–∞—Ç—ã</div>
  <div class="input-wrapper">
    <input type="number" id="KolvoSotrudnikovOMNI" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSotrudnikovOMNI')">
  </div>
  <div id="cost-KolvoSotrudnikovOMNI"></div>
  <div id="limit-KolvoSotrudnikovOMNI">0</div>
</div>

<div class="calc-row" data-id="KolvoWA" align="center">
  <div class="label">–ö–æ–ª-–≤–æ WhatsApp –∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
  <div class="input-wrapper">
    <input type="number" id="KolvoWA" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoWA')">
  </div>
  <div id="cost-KolvoWA"></div>
  <div id="limit-KolvoWA">0</div>
</div>

<div class="calc-row" data-id="KolvoWABA" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –∫–∞–Ω–∞–ª–æ–≤ WABA
 <span class="info-icon">i</span>
    <div class="tooltip">
      C—Ç–æ–∏–º–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–æ–≤ <br>
      - –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã: 9,2—Ä. <br>
      - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã: 5,52—Ä. <br>
      - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã: 4,94—Ä. <br>
      - —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã: 4,6—Ä. <br>
    </div>
 </div>
  <div class="input-wrapper">
    <input type="number" id="KolvoWABA" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoWABA')">
  </div>
  <div id="cost-KolvoWABA">0</div>
  <div id="limit-KolvoWABA">0</div>
</div>

<div class="calc-row" data-id="TgVkAvito" align="center">
  <div class="label">Telegram, Tg Bot, VK Groups, –ê–≤–∏—Ç–æ, AutoRU, E-mail, –°–ú–°, Viber, WEB-—á–∞—Ç</div>
  <div class="input-wrapper">
    <input type="checkbox" id="TgVkAvito" onchange="runCascade('TgVkAvito')">
  </div>
  <div id="cost-TgVkAvito">0</div>
  <div id="limit-TgVkAvito"></div>
</div>

<div class="calc-row" data-id="OMNIKnopka" align="center">
  <div class="label">–û–ú–ù–ò –≤–∏–¥–∂–µ—Ç –Ω–∞ —Å–∞–π—Ç
    <span class="info-icon">i</span>
    <div class="tooltip">
      –í–∏–¥–∂–µ—Ç, —Ñ–æ—Ä–º–∞, –∫–Ω–æ–ø–∫–∞ —Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏ <br>
      –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è
    </div>
  </div>
  <div class="input-wrapper">
    <input type="checkbox" id="OMNIKnopka" onchange="runCascade('OMNIKnopka')">
  </div>
  <div id="cost-OMNIKnopka">0</div>
  <div id="limit-OMNIKnopka"></div>
</div>

    </div>

    <!-- –¢—Ä–µ—Ç–∏–π –±–ª–æ–∫ -->
    <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã <span id="toggle-analytics" style="cursor:pointer; color:#007BFF; margin-left: 8px; font-size:20px">(–ø–æ–∫–∞–∑–∞—Ç—å)</span></h2>
    <div class="calc-block" id="block-ar" style="display:none; background: #fff0e5;">
      <div class="calc-row calc-row-header">
        <div>–û–ø—Ü–∏—è</div>
        <div>–í—ã–±–æ—Ä</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        <div>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</div>
      </div>
<div class="calc-row" data-id="AR" align="center">
  <div class="label"><strong>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã</strong>
    <span class="info-icon">i</span>
    <div class="tooltip">
      - –í–µ–± –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ - —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —Å–∞–π—Ç–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º <br>
      - –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤, –ø—Ä–æ—Å–ª—É—à–∫–∞, —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ <br>
      - –ó–∞–±–∏—Ä–∞–µ–º –∑–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞ (JS API) <br>
      - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ú–∞—Ä–∫–≤–∏–∑ –∏ –¢–∏–ª—å–¥–∞ <br>
      - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∫–ª–∞–º–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏ —Å –º–µ—Ç—Ä–∏–∫–æ–π <br>
      - –®–∞–±–ª–æ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (—Å–≤–æ–¥–Ω—ã–µ) –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è <br>
      - –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ—Ç—á–µ—Ç—ã) <br>
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π
    </div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="AR" onchange="runCascade('AR')"></div>
  <div id="cost-AR">0</div>
  <div id="limit-AR"></div>
</div>

<div class="calc-row" data-id="KolvoSaitov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ —Å–∞–π—Ç–æ–≤</div>
  <div class="input-wrapper"><input type="number" id="KolvoSaitov" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('KolvoSaitov')"></div>
  <div id="cost-KolvoSaitov"></div>
  <div id="limit-KolvoSaitov">0</div>
</div>

<div class="calc-row" data-id="KolvoPolzovatelskihIstochnikov" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</div>
  <div class="input-wrapper">
    <select id="KolvoPolzovatelskihIstochnikov" onkeydown="handleEnter(event)" onchange="runCascade('KolvoPolzovatelskihIstochnikov')">
      <option value="0">0</option>
      <option value="50">50</option>
      <option value="250">250</option>
      <option value="500">500</option>
      <option value="5000">5000</option>
    </select>
  </div>
  <div id="cost-KolvoPolzovatelskihIstochnikov"></div>
  <div id="limit-KolvoPolzovatelskihIstochnikov">0</div>
</div>

<div class="calc-row" data-id="PaketTrafika" align="center">
  <div class="label">–ü–∞–∫–µ—Ç —Ç—Ä–∞—Ñ–∏–∫–∞
    <span class="info-icon">i</span>
    <div class="tooltip">0,2—Ä/–ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –±–µ–∑ –∏ —Å–≤–µ—Ä—Ö –ø–∞–∫–µ—Ç–∞</div>
  </div>
  <div class="input-wrapper">
    <select id="PaketTrafika" onkeydown="handleEnter(event)" onchange="runCascade('PaketTrafika')">
      <option value="0">0</option>
      <option value="10000">10000</option>
      <option value="20000">20000</option>
      <option value="50000">50000</option>
      <option value="100000">100000</option>
      <option value="200000">200000</option>
      <option value="500000">500000</option>
      <option value="–±–µ–∑–ª–∏–º–∏—Ç">–±–µ–∑–ª–∏–º–∏—Ç</option>
    </select>
  </div>
  <div id="cost-PaketTrafika"></div>
  <div id="limit-PaketTrafika">0</div>
</div>

<div class="calc-row" data-id="KT" align="center">
  <div class="label">–ö–æ–ª–ª—Ç—Ä–µ–∫–∏–Ω–≥
    <span class="info-icon">i</span>
    <div class="tooltip">
      - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –ö–¢ <br>
      - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ö–¢ + —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ <br>
      - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ö–¢ –∏ —Ç.–¥.
    </div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="KT" onchange="runCascade('KT')"></div>
  <div id="cost-KT">0</div>
  <div id="limit-KT"></div>
</div>

<div class="calc-row" data-id="NomeraKT" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –Ω–æ–º–µ—Ä–æ–≤ –ö–¢ - –ì–æ—Ä–æ–¥—Å–∫–∏–µ/–ú–æ–±–∏–ª—å–Ω—ã–µ</div>
  <div class="input-wrapper"><input type="number" id="NomeraKT" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('NomeraKT')"></div>
  <div id="cost-NomeraKT">0</div>
  <div id="limit-NomeraKT"></div>
</div>

<div class="calc-row" data-id="NomeraKT8800" align="center">
  <div class="label">–ö–æ–ª-–≤–æ –Ω–æ–º–µ—Ä–æ–≤ –ö–¢ - 8800
    <span class="info-icon">i</span>
    <div class="tooltip">700—Ä. - –º–∏–Ω. —Å—á–µ—Ç, —Ä–∞—Å—Ö–æ–¥—É–µ—Ç—Å—è –Ω–∞ –∑–≤–æ–Ω–∫–∏</div>
  </div>
  <div class="input-wrapper"><input type="number" id="NomeraKT8800" min="0" value="0" onkeydown="handleEnter(event)" onchange="runCascade('NomeraKT8800')"></div>
  <div id="cost-NomeraKT8800">0</div>
  <div id="limit-NomeraKT8800"></div>
</div>

<div class="calc-row" align="center">
  <div class="label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ö–¢</div>
  <div class="input-wrapper">
    <select id="DlitelnostHraneniyaAR" onkeydown="handleEnter(event)" onchange="runCascade('DlitelnostHraneniyaAR')">
      <option value="0">0</option>
      <option value="1 –Ω–µ–¥–µ–ª—è">1 –Ω–µ–¥–µ–ª—è</option>
      <option value="1 –º–µ—Å—è—Ü">1 –º–µ—Å—è—Ü</option>
      <option value="3 –º–µ—Å—è—Ü–∞">3 –º–µ—Å—è—Ü–∞</option>
      <option value="6 –º–µ—Å—è—Ü–µ–≤">6 –º–µ—Å—è—Ü–µ–≤</option>
      <option value="1 –≥–æ–¥">1 –≥–æ–¥</option>
      <option value="2 –≥–æ–¥–∞">2 –≥–æ–¥–∞</option>
      <option value="4 –≥–æ–¥–∞">4 –≥–æ–¥–∞</option>
    </select>
  </div>
  <div id="cost-DlitelnostHraneniyaAR"></div>
  <div id="limit-DlitelnostHraneniyaAR">0</div>
</div>

<div class="calc-row" data-id="EmailTreking" align="center">
  <div class="label">Email-—Ç—Ä–µ–∫–∏–Ω–≥ (–∫–æ–ª-–≤–æ –ø–∏—Å–µ–º –≤ –º–µ—Å—è—Ü)
    <span class="info-icon">i</span>
    <div class="tooltip">–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π</div>
  </div>
  <div class="input-wrapper">
    <select id="EmailTreking" onkeydown="handleEnter(event)" onchange="runCascade('EmailTreking')">
      <option value="–Ω–µ—Ç">–Ω–µ—Ç</option>
      <option value="–¥–æ 100 —à—Ç.">–¥–æ 100 —à—Ç.</option>
      <option value="–±–æ–ª—å—à–µ 100 —à—Ç.">–±–æ–ª—å—à–µ 100 —à—Ç.</option>
    </select>
  </div>
  <div id="cost-EmailTreking">0</div>
  <div id="limit-EmailTreking">0</div>
</div>

<div class="calc-row" data-id="KonstruktorOtchetov" align="center">
  <div class="label">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç—á–µ—Ç–æ–≤
    <span class="info-icon">i</span>
    <div class="tooltip">
      - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –æ—Ç—á–µ—Ç–æ–≤ (—Å–≤–æ–¥–Ω—ã–µ, –¥–∞—à–±–æ—Ä–¥—ã, —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ) <br>
      - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ <br>
      - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ü–∏–∏ (–≤—Å—è –º—É–ª—å—Ç–∏–∫–∞–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞) <br><br>
      –ë–µ–∑ –æ–ø—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —à–∞–±–ª–æ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–ª—å–∑—è –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å
    </div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="KonstruktorOtchetov" onchange="runCascade('KonstruktorOtchetov')"></div>
  <div id="cost-KonstruktorOtchetov">0</div>
  <div id="limit-KonstruktorOtchetov"></div>
</div>

<div class="calc-row" data-id="AnalitikaProdaj" align="center">
  <div class="label">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ –∏–∑ CRM
    <span class="info-icon">i</span>
    <div class="tooltip">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–¥–µ–ª–æ–∫ –∏–∑ CRM –≤ UIS</div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="AnalitikaProdaj" onchange="runCascade('AnalitikaProdaj')"></div>
  <div id="cost-AnalitikaProdaj">0</div>
  <div id="limit-AnalitikaProdaj"></div>
</div>

<div class="calc-row" data-id="IntegraciyaSVidjetami" align="center">
  <div class="label">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏
    <span class="info-icon">i</span>
    <div class="tooltip">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–∞</div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="IntegraciyaSVidjetami" onchange="runCascade('IntegraciyaSVidjetami')"></div>
  <div id="cost-IntegraciyaSVidjetami">0</div>
  <div id="limit-IntegraciyaSVidjetami"></div>
</div>

    </div>

    <!-- –ß–µ—Ç–≤—ë—Ä—Ç—ã–π –±–ª–æ–∫ -->
    <h2>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –¥–æ–ø. –æ–ø—Ü–∏–∏</h2>
    <div class="calc-block" id="block-integration" style="background: #f2ebff;">
      <div class="calc-row calc-row-header">
        <div>–û–ø—Ü–∏—è</div>
        <div>–í—ã–±–æ—Ä</div>
        <div>–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
        <div>–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ</div>
      </div>
<div class="calc-row" data-id="AmoBitrix" align="center">
  <div class="label"><strong>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å amoCRM –∏–ª–∏ –ë–∏—Ç—Ä–∏–∫—Å 24</strong></div>
  <div class="input-wrapper"><input type="checkbox" id="AmoBitrix" onchange="runCascade('AmoBitrix')"></div>
  <div id="cost-AmoBitrix">0</div>
  <div id="limit-AmoBitrix"></div>
</div>

<div class="calc-row" data-id="IntegraciyaOtraslevie" align="center">
  <div class="label">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ç—Ä–∞—Å–ª–µ–≤—ã–º–∏ CRM
    <span class="info-icon">i</span>
    <div class="tooltip">
      API, Webhook –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∑–≤–æ–Ω–∫–æ–≤ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã. <br><br>
      –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª-–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤: <br>
      DataAPI –≤ –º–∏–Ω—É—Ç—É ‚Äî 1‚Äì60 = 0; 61‚Äì900 = 15 —Ä—É–±. <br>
      DataAPI –≤ –¥–µ–Ω—å ‚Äî 1‚Äì500 = 0; 501‚Äì1200000 = 0.06 —Ä—É–±. <br>
      HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¥–µ–Ω—å ‚Äî 1‚Äì500 = 0; 501‚Äì1200000 = 0.02 —Ä—É–±. <br>
      HTTP-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –º–∏–Ω—É—Ç—É ‚Äî 1‚Äì60 = 0; 61‚Äì900 = 15 —Ä—É–±. <br>
      Call API –≤ –¥–µ–Ω—å ‚Äî 1‚Äì500 = 0; 501‚Äì40000 = 1 —Ä—É–±. <br>
      Call API –≤ –º–∏–Ω—É—Ç—É ‚Äî 1‚Äì15 = 0; 16‚Äì300 = 10 —Ä—É–±.
    </div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="IntegraciyaOtraslevie" onchange="runCascade('IntegraciyaOtraslevie')"></div>
  <div id="cost-IntegraciyaOtraslevie">0</div>
  <div id="limit-IntegraciyaOtraslevie"></div>
</div>

<div class="calc-row" data-id="UvedomlenieOSobitiyah" align="center">
  <div class="label">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
    <span class="info-icon">i</span>
    <div class="tooltip">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ E-mail –∏ SMS<br>SMS ‚Äî 3.7 —Ä—É–±/—à—Ç</div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="UvedomlenieOSobitiyah" onchange="runCascade('UvedomlenieOSobitiyah')"></div>
  <div id="cost-UvedomlenieOSobitiyah">0</div>
  <div id="limit-UvedomlenieOSobitiyah"></div>
</div>

<div class="calc-row" data-id="VneshnieATS" align="center">
  <div class="label">–í–Ω–µ—à–Ω–∏–µ –ê–¢–°
    <span class="info-icon">i</span>
    <div class="tooltip">–ó–≤–æ–Ω–∫–∏ –º–µ–∂–¥—É UIS –∏ –≤–Ω–µ—à–Ω–µ–π –ê–¢–° –ø–æ –∫–æ—Ä–æ—Ç–∫–∏–º –¥–æ–±–∞–≤–æ—á–Ω—ã–º —á–µ—Ä–µ–∑ SMART-—Ç—Ä–∞–Ω–∫</div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="VneshnieATS" onchange="runCascade('VneshnieATS')"></div>
  <div id="cost-VneshnieATS">0</div>
  <div id="limit-VneshnieATS"></div>
</div>

<div class="calc-row" data-id="SpasenieKommunikatsiy" align="center">
  <div class="label">–°–ø–∞—Å–µ–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π
    <span class="info-icon">i</span>
    <div class="tooltip">
      - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–≤–æ–Ω –ø–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º <br>
      - –ê–≤—Ç–æ—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ <br>
      - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ E-mail –∏ SMS (SMS ‚Äî 3.7 —Ä—É–±/—à—Ç) <br>
      - –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –ø–æ –∑–≤–æ–Ω–∫–∞–º
    </div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="SpasenieKommunikatsiy" onchange="runCascade('SpasenieKommunikatsiy')"></div>
  <div id="cost-SpasenieKommunikatsiy">0</div>
  <div id="limit-SpasenieKommunikatsiy"></div>
</div>

<div class="calc-row" data-id="AvtoperezvonPoZayavkam" align="center">
  <div class="label">–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–≤–æ–Ω –ø–æ –∑–∞—è–≤–∫–∞–º —Å —Å–∞–π—Ç–∞</div>
  <div class="input-wrapper"><input type="checkbox" id="AvtoperezvonPoZayavkam" onchange="runCascade('AvtoperezvonPoZayavkam')"></div>
  <div id="cost-AvtoperezvonPoZayavkam">0</div>
  <div id="limit-AvtoperezvonPoZayavkam"></div>
</div>

<div class="calc-row" data-id="VezdeKakDoma" align="center">
  <div class="label">–í–µ–∑–¥–µ –∫–∞–∫ –¥–æ–º–∞
    <span class="info-icon">i</span>
    <div class="tooltip">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –Ω–æ–º–µ—Ä–∞ –ø—Ä–∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–∞—Ö</div>
  </div>
  <div class="input-wrapper"><input type="checkbox" id="VezdeKakDoma" onchange="runCascade('VezdeKakDoma')"></div>
  <div id="cost-VezdeKakDoma">0</div>
  <div id="limit-VezdeKakDoma"></div>
</div>

    </div>

    <!-- –ò—Ç–æ–≥–æ–≤—ã–π –±–ª–æ–∫ -->
<div class="cost-header">
<div class="spacer"></div>
    <h2>
      –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞:
    </h2>
<div class="btn-group">
        <button class="btn" onclick="resetForm()">–°—Ç–µ—Ä–µ—Ç—å —Ä–∞—Å—á–µ—Ç</button>
        <!-- //<button class="btn" onclick="exportPDF()">–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF</button> -->
      </div>
</div>
    <div class="result-block" id="result">
  <div class="result-row">
    <div><strong>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç—ë–∂</strong></div>
    <div id="total-monthly">0</div>
  </div>

  <div class="result-row">
    <div>
      <strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—á—ë—Ç –∑–∞ –Ω–æ–º–µ—Ä(–∞) 8800</strong>
      <span style="position: relative;">
<span class="info-icon">i</span>
      <div class="tooltip" style="left: 50%;
  transform: translateX(-50%) translateY(8px);
      top: 100%; max-width: 250px;">–†–∞—Å—Ö–æ–¥—É–µ—Ç—Å—è –Ω–∞ –∑–≤–æ–Ω–∫–∏<br></div>
</span>
    </div>
    <div id="total-minimal">0</div>
  </div>

  <div class="result-row">
    <div><strong>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤ (—Ä–∞–∑–æ–≤–æ)</strong></div>
    <div id="total-connection">0</div>
  </div>

  <div class="result-row">
    <div><strong>–î–æ—Å—Ç–∞–≤–∫–∞ FMC-—Å–∏–º –∫–∞—Ä—Ç (—Ä–∞–∑–æ–≤–æ)</strong></div>
    <div id="total-delivery">0</div>
  </div>
	    <div class="result-row">
  <div>
    <strong>–ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π –ø–ª–∞—Ç—ë–∂</strong>
	  <span style="position: relative; display: inline-block;">
    <span class="info-icon">i</span>
    <div class="tooltip" id="tooltip-guarantee" style="left: 50%;
  transform: translateX(-50%) translateY(-8px);
      bottom: 100%; top: auto; max-width: 250px;">–ë—É–¥–µ—Ç "–∑–∞–º–æ—Ä–æ–∂–µ–Ω" –Ω–∞ —Å—á–µ—Ç–µ –∫–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—è –æ–ø–ª–∞—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω –∏–ª–∏ —É—á—Ç–µ–Ω –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞.</div>
		  </span>
  </div>
  <div id="total-guarantee">0</div>
</div>

</div>

  </div>

  <script>
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏ placeholder
  document.querySelectorAll('input[type="number"]').forEach(input => {
    // –°–µ—Ä—ã–π placeholder
    input.setAttribute("placeholder", "0");

    // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ 0 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ‚Äî –¥–µ–ª–∞–µ–º –ø–æ–ª–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—É—Å—Ç—ã–º
    if (input.value === "0") input.value = "";

    // –ü—Ä–∏ —Ñ–æ–∫—É—Å–µ ‚Äî –µ—Å–ª–∏ –ø–æ–ª–µ –±—ã–ª–æ 0, –æ—á–∏—â–∞–µ–º –µ–≥–æ
    input.addEventListener("focus", () => {
      if (input.value === "0") input.value = "";
    });

    // –ü—Ä–∏ —É—Ö–æ–¥–µ –∏–∑ –ø–æ–ª—è ‚Äî –µ—Å–ª–∏ –ø—É—Å—Ç–æ, –≤–µ—Ä–Ω—É—Ç—å 0
    input.addEventListener("blur", () => {
      if (input.value === "") input.value = "0";
    });
  });
	  
    function toggleExpert() {
      const block = document.getElementById('block-expert');
      const toggle = document.querySelector('.expert-toggle');
      block.classList.toggle('visible');
      toggle.textContent = block.classList.contains('visible') ? '–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –í–ê–¢–° (—Å–∫—Ä—ã—Ç—å)' : '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –í–ê–¢–° (–ø–æ–∫–∞–∑–∞—Ç—å)';
    }

    function resetForm() {
  // –°–±—Ä–æ—Å —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π
  document.querySelectorAll('input[type="number"]').forEach(input => {
    input.value = 0;
  });

  // –°–±—Ä–æ—Å —á–µ–∫–±–æ–∫—Å–æ–≤
  document.querySelectorAll('input[type="checkbox"]').forEach(box => {
    box.checked = false;
  });

  // –°–±—Ä–æ—Å —Å–ø–∏—Å–∫–æ–≤ (select)
  document.querySelectorAll('select').forEach(select => {
    select.selectedIndex = 0;
  });

  // –°–±—Ä–æ—Å –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø–æ–ª—è NomeraVATSVsego
  const vsego = document.getElementById("NomeraVATSVsego");
  if (vsego) vsego.value = 0;

  // –û—á–∏—Å—Ç–∫–∞ –∫–∞—Å–∫–∞–¥–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
  if (typeof manualChanges !== 'undefined') manualChanges.clear();

  // –û–±–Ω–æ–≤–∏—Ç—å –∏—Ç–æ–≥–∏
  updateTotals()

}


    function exportPDF() {
      // –ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–∑–∂–µ
      alert("–≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ");
    }
	function handleEnter(e) {
  if (e.key === 'Enter') {
    const inputs = [...document.querySelectorAll('input[type="number"], select')];
    const index = inputs.indexOf(e.target);
    if (index >= 0 && index < inputs.length - 1) {
      inputs[index + 1].focus();
    }
  }
}
  // üëá –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è
  document.addEventListener('input', updateTotals);
  document.addEventListener('change', updateTotals);

  function parseVal(id) {
    const el = document.getElementById(id);
    if (!el) return 0;
    const val = el.value || el.textContent;
    const num = parseFloat(val.toString().replace(/[^\d.]/g, ''));
    return isNaN(num) ? 0 : num;
  }
const formulaMap = {
  VATS: {
    cost: () => getCheckbox("VATS") ? 1200 : 0,
  },
  VATSPRO: {
    cost: () => getCheckbox("VATSPRO") ? 2200 : 0,
  },
  KolvoSotrudnikovVATS: {
    limit: () => {
      const val = getNumber("KolvoSotrudnikovVATS");
      const vatspro = getCheckbox("VATSPRO");
      return val < 4 ? 0 : (val - 3) * (vatspro ? 200 : 120);
    }
  },
DlitelnostHraneniyaVATS: {
  limit: () => {
    const ar = getSelect("DlitelnostHraneniyaAR");
    const vats = getSelect("DlitelnostHraneniyaVATS");
    const price = {
      "1 –º–µ—Å—è—Ü": 500,
      "3 –º–µ—Å—è—Ü–∞": 1000,
      "6 –º–µ—Å—è—Ü–µ–≤": 1500,
      "1 –≥–æ–¥": 3000,
      "2 –≥–æ–¥–∞": 5000,
      "4 –≥–æ–¥–∞": 7000,
    };
    if (!vats || vats === "0") return 0;
    if (!ar || ar === "0") return price[vats] || 0;
    if ((price[ar] || 0) > (price[vats] || 0)) return "—É—á—Ç–µ–Ω–æ –≤ KT";
    return price[vats] || 0;
  }
},
LiniyGrupovogoVizova: {
  limit: () => {
    const val = getNumber("LiniyGrupovogoVizova");
    if (val < 4) return 0;
    if (val < 51) return (val - 3) * 190;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 50";
  }
},
LiniyIshodyashihZvonkov: {
  limit: () => {
    const val = getNumber("LiniyIshodyashihZvonkov");
    if (val < 31) return 0;
    if (val < 101) return (val - 30) * 190;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 100";
  }
},
KolvoSIPTrankov: {
  cost: () => {
    const val = getNumber("KolvoSIPTrankov");
    if (val < 1501) return val * 400;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 1500";
  }
},
KanalnostSIPTrankov: {
  limit: () => {
    const val = getNumber("KanalnostSIPTrankov");
    if (val < 31) return 0;
    if (val < 61) return 1000;
    if (val < 91) return 1500;
    if (val < 181) return 3000;
    return 0;
  }
},
KolvoSIPURI: {
  cost: () => {
    const val = getNumber("KolvoSIPURI");
    if (val < 1501) return val * 100;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 1500";
  }
},
KolvoSIPAkkauntov: {
  cost: () => {
    const val = getNumber("KolvoSIPAkkauntov");
    if (val < 1501) return val * 300;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 1500";
  }
},
KanalnostSIPAkkauntov: {
  limit: () => {
    const val = getNumber("KanalnostSIPAkkauntov");
    if (val < 31) return 0;
    if (val < 61) return 1000;
    if (val < 91) return 1500;
    if (val < 181) return 3000;
    return 0;
  }
},
NomeraVATS: {
  cost: () => getNumber("NomeraVATS") * 300
},
NomeraVATS8800: {
  cost: () => getNumber("NomeraVATS8800") * 590
},
KolvoSvoihNomerov: {
  cost: () => {
    const val = getNumber("KolvoSvoihNomerov");
    return val < 11 ? val * 200 : val * 100;
  }
},
KolvoFMC: {
  cost: () => {
    const tarif = document.getElementById("TarifFMC")?.value || "";
    const count = getNumber("KolvoFMC");
    let price = 0;
    switch (tarif) {
      case "200 –º–∏–Ω—É—Ç, 1–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞": price = 790; break;
      case "600 –º–∏–Ω—É—Ç, 5–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞": price = 1290; break;
      case "800 –º–∏–Ω—É—Ç, 10–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞": price = 1990; break;
      case "2000 –º–∏–Ω—É—Ç, 20–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞": price = 4490; break;
      case "15 –º–∏–Ω—É—Ç, 0,2–ì–± –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞": price = 390; break;
    }
    return price * count;
  }
},
NomeraVATSVsego: {
  limit: () => {
    const val = getNumber("NomeraVATSVsego");
    return val < 4 ? 0 : (val - 3) * 100;
  }
},
OMNI: {
  cost: () => getCheckbox("OMNI") ? 2600 : 0
},
KolvoSotrudnikovOMNI: {
  limit: () => {
    const val = getNumber("KolvoSotrudnikovOMNI");
    if (val < 4) return 0;
    if (val < 21) return (val - 3) * 590;
    if (val < 31) return (val - 3) * 540;
    if (val < 41) return (val - 3) * 490;
    if (val < 101) return (val - 3) * 440;
    if (val < 201) return (val - 3) * 390;
    if (val < 1001) return (val - 3) * 340;
    if (val < 10001) return (val - 3) * 290;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 10000";
  }
},
KolvoWA: {
  limit: () => getNumber("KolvoWA") * 990
},
KolvoWABA: {
  cost: () => getNumber("KolvoWABA") > 0 ? 4000 : 0,
  limit: () => getNumber("KolvoWABA") * 5000
},
TgVkAvito: {
  cost: () => getCheckbox("TgVkAvito") ? "–±–µ–∑–ª–∏–º–∏—Ç" : 0
},
OMNIKnopka: {
  cost: () => getCheckbox("OMNIKnopka") ? "–±–µ–∑–ª–∏–º–∏—Ç" : 0
},
AR: {
  cost: () => getCheckbox("AR") ? 2000 : 0
},
KolvoSaitov: {
  limit: () => {
    const val = getNumber("KolvoSaitov");
    if (val < 2) return 0;
    if (val < 6) return (val - 1) * 500;
    if (val < 21) return 7000;
    if (val < 1501) return 12000;
    return "—É–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 1500";
  }
},
KolvoPolzovatelskihIstochnikov: {
  limit: () => {
    const val = getNumber("KolvoPolzovatelskihIstochnikov");
    if (val === 250) return 1000;
    if (val === 500) return 2000;
    if (val === 5000) return 3000;
    return 0;
  }
},
PaketTrafika: {
  limit: () => {
    const val = document.getElementById("PaketTrafika")?.value || "";
    const num = parseInt(val);
    if (val === "–±–µ–∑–ª–∏–º–∏—Ç") return 50000;
    if (num === 0 || num === 10000) return 0;
    if (num === 20000) return 1000;
    if (num === 50000) return 3500;
    if (num === 100000) return 7500;
    if (num === 200000) return 15000;
    if (num === 500000) return 30000;
    return 50000;
  }
},
KT: {
  cost: () => getCheckbox("KT") ? 1500 : 0
},
NomeraKT: {
  cost: () => getNumber("NomeraKT") * 300
},
NomeraKT8800: {
  cost: () => getNumber("NomeraKT8800") * 590
},
DlitelnostHraneniyaAR: {
  limit: () => {
    const values = {
      "0": 0,
      "1 –º–µ—Å—è—Ü": 500,
      "3 –º–µ—Å—è—Ü–∞": 1000,
      "6 –º–µ—Å—è—Ü–µ–≤": 1500,
      "1 –≥–æ–¥": 3000,
      "2 –≥–æ–¥–∞": 5000,
      "4 –≥–æ–¥–∞": 7000
    };
    const vats = document.getElementById("DlitelnostHraneniyaVATS")?.value || "";
    const ar = document.getElementById("DlitelnostHraneniyaAR")?.value || "";
    
    if (ar === "0") return 0;
    
    const vatsVal = values[vats] ?? 0;
    const arVal = values[ar] ?? 0;

    return vatsVal >= arVal ? "—É—á—Ç–µ–Ω–æ –≤ –í–ê–¢–°" : arVal;
  }
},
EmailTreking: {
  cost: () => {
    const val = document.getElementById("EmailTreking")?.value || "";
    return val !== "–Ω–µ—Ç" ? 2000 : 0;
  },
  limit: () => {
    const val = document.getElementById("EmailTreking")?.value || "";
    return val === "–±–æ–ª—å—à–µ 100 —à—Ç." ? 1000 : 0;
  }
},
KonstruktorOtchetov: {
  cost: () => getCheckbox("KonstruktorOtchetov") ? 4000 : 0
},
AnalitikaProdaj: {
  cost: () => getCheckbox("AnalitikaProdaj") ? 3000 : 0
},
IntegraciyaSVidjetami: {
  cost: () => getCheckbox("IntegraciyaSVidjetami") ? 2000 : 0
},
AmoBitrix: {
  cost: () => getCheckbox("AmoBitrix") ? 1000 : 0
},
IntegraciyaOtraslevie: {
  cost: () => getCheckbox("IntegraciyaOtraslevie") ? 2000 : 0
},
UvedomlenieOSobitiyah: {
  cost: () => getCheckbox("UvedomlenieOSobitiyah") ? 800 : 0
},
VneshnieATS: {
  cost: () => getCheckbox("VneshnieATS") ? 3000 : 0
},
SpasenieKommunikatsiy: {
  cost: () => getCheckbox("SpasenieKommunikatsiy") ? 1600 : 0
},
AvtoperezvonPoZayavkam: {
  cost: () => getCheckbox("AvtoperezvonPoZayavkam") ? 1600 : 0
},
VezdeKakDoma: {
  cost: () => getCheckbox("VezdeKakDoma") ? 2000 : 0
}
};
const manualChanges = new Set();
let cascadeQueue = [];
let isProcessing = false;

function runCascade(startField) {
  if (isProcessing) {
    manualChanges.add(startField);
    return;
  }

  cascadeQueue = [startField];
  isProcessing = true;

  let depth = 0;
  const maxDepth = 3;

  const context = {
    set: (id, value) => {
      const el = document.getElementById(id);
      if (!el) return;
      const current = el.type === "checkbox" ? el.checked : el.value;
      const changedByUser = manualChanges.has(id);
      const isSame = current == value;

      if (isSame || changedByUser) return;

      if (el.type === "checkbox") el.checked = value;
      else el.value = value;

      cascadeQueue.push(id);
    },
    select: (id, value) => {
      const el = document.getElementById(id);
      if (!el) return;
      const changedByUser = manualChanges.has(id);
      const isSame = el.value === value;
      if (isSame || changedByUser) return;
      el.value = value;
      cascadeQueue.push(id);
    }
  };

  while (cascadeQueue.length && depth < maxDepth) {
    const current = cascadeQueue.shift();
    const rule = rules[current];
    if (rule) rule(context);
    depth++;
  }

  isProcessing = false;
  manualChanges.clear();
  updateTotals();
}

  function updateTotals() {
  Object.entries(formulaMap).forEach(([id, formula]) => {
    const costEl = document.getElementById(`cost-${id}`);
    const limitEl = document.getElementById(`limit-${id}`);
    const inputEl = document.getElementById(id);

    // === COST ===
    if (costEl) {
      if (formula.cost) {
        const val = formula.cost();
        costEl.textContent = (typeof val === "number") ? val.toFixed(0) : (val || "");
      } else {
        costEl.textContent = "";
      }
    }

    // === LIMIT ===
    if (limitEl) {
      if (formula.limit) {
        const val = formula.limit();
        limitEl.textContent = (typeof val === "number") ? val.toFixed(0) : (val || "");
      } else {
        limitEl.textContent = "";
      }
    }
  });



    // 1. –ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂ (—Å—É–º–º–∞ –≤—Å–µ—Ö cost- –∏ limit-)
    let total = 0;
    document.querySelectorAll('[id^="cost-"], [id^="limit-"]').forEach(el => {
      const txt = el.textContent?.trim() || "";
      if (txt.toLowerCase().includes("—É–º–µ–Ω—å—à–∏—Ç–µ") || txt === "" || txt === "0") return;
      const val = parseFloat(txt.replace(/[^\d.]/g, ''));
      if (!isNaN(val)) total += val;

    });
    document.getElementById('total-monthly').textContent = total.toFixed(0);

    // 2. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—á—ë—Ç –∑–∞ –Ω–æ–º–µ—Ä–∞ 8800
    const nom8800 = parseVal("NomeraVATS8800") + parseVal("NomeraKT8800");
    document.getElementById('total-minimal').textContent = (nom8800 * 700).toFixed(0);

    // 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–æ–≤
    const connect = parseVal("NomeraVATS") * 300 + parseVal("KolvoFMC") * 250;
    document.getElementById('total-connection').textContent = connect.toFixed(0);

    // 4. –î–æ—Å—Ç–∞–≤–∫–∞ FMC
    const region = (document.getElementById("RegionDostavki")?.value || "").trim();
    let delivery = 0;
    if (region === "–ú–æ—Å–∫–≤–∞ –∏ –º—Å–∫. –æ–±–ª." || region === "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ –∏ –ª–µ–Ω. –æ–±–ª.") delivery = 500;
    else if (region === "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –†–æ—Å—Å–∏—è, –ü–æ–≤–æ–ª–∂—å–µ") delivery = 750;
    else if (region === "–Æ–≥, –£—Ä–∞–ª, –°–∏–±–∏—Ä—å") delivery = 1000;
    else if (region === "–î–∞–ª—å–Ω–∏–π –í–æ—Å—Ç–æ–∫") delivery = 1300;
    document.getElementById('total-delivery').textContent = delivery.toFixed(0);

    // 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç NomeraVATSVsego
    const sumAll = parseVal("NomeraVATS") + parseVal("NomeraVATS8800") + parseVal("KolvoFMC");
    document.getElementById("NomeraVATSVsego").value = sumAll;

	      // 6. –ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π –ø–ª–∞—Ç—ë–∂
    const monthly = parseVal("total-monthly");
    const minimal = parseVal("total-minimal");
    const connection = parseVal("total-connection"); //–Ω—É–∂–Ω–æ –ª–∏? 

    const baseSum = monthly + minimal + connection;
    const guarantee = baseSum > 0 ? (baseSum < 4000 ? 4000 : baseSum) : 0;
    document.getElementById('total-guarantee').textContent = guarantee.toFixed(0);

    const maxLimit = baseSum <= 10000
      ? guarantee * 2
      : guarantee * 1.7;

    document.getElementById('tooltip-guarantee').textContent =
      `–ë—É–¥–µ—Ç "–∑–∞–º–æ—Ä–æ–∂–µ–Ω" –Ω–∞ —Å—á–µ—Ç–µ –∫–∞–∫ –≥–∞—Ä–∞–Ω—Ç–∏—è –æ–ø–ª–∞—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω –∏–ª–∏ —É—á—Ç–µ–Ω –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞. ` +
      `–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞: ${maxLimit.toFixed(0)} —Ä—É–±.`;

  }

function getCheckbox(id) {
  const el = document.getElementById(id);
  return el?.checked ?? false;
}

function getNumber(id) {
  const val = parseFloat(document.getElementById(id)?.value ?? 0);
  return isNaN(val) ? 0 : val;
}

function getSelect(id) {
  return document.getElementById(id)?.value ?? "";
}
// === –ö–ê–°–ö–ê–î–ù–´–ï –ü–†–ê–í–ò–õ–ê ===
const rules = {
  VATS: (context) => {
    const val = getCheckbox("VATS");
    const prev = context.prev?.VATS;

    if (val === true) {
      context.select("DlitelnostHraneniyaVATS", "1 –Ω–µ–¥–µ–ª—è"); // –≤—ã–±—Ä–∞—Ç—å "1 –Ω–µ–¥–µ–ª—è"
      if (getNumber("KolvoSotrudnikovVATS") < 3) context.set("KolvoSotrudnikovVATS", 3);
      if (getNumber("LiniyGrupovogoVizova") < 3) context.set("LiniyGrupovogoVizova", 3);
      if (getNumber("LiniyIshodyashihZvonkov") < 30) context.set("LiniyIshodyashihZvonkov", 30);
    } else {
      context.set("KolvoSotrudnikovVATS", 0);
      context.set("LiniyGrupovogoVizova", 0);
      context.set("LiniyIshodyashihZvonkov", 0);
      context.set("KolvoSIPTrankov", 0);
      context.set("KolvoSIPURI", 0);
      context.set("KolvoSIPAkkauntov", 0);
      context.set("NomeraVATS", 0);
      context.set("NomeraVATS8800", 0);
      context.set("KolvoSvoihNomerov", 0);
      context.set("KolvoFMC", 0);

      context.set("VATSPRO", false);
      context.select("DlitelnostHraneniyaVATS", 0);
      context.select("KanalnostSIPTrankov", 0);
      context.select("KanalnostSIPAkkauntov", 0);
      context.select("TarifFMC", "–Ω–µ—Ç");
      context.select("RegionDostavki", "–Ω–µ—Ç");

      context.set("VneshnieATS", false);
      context.set("SpasenieKommunikatsiy", false);
      context.set("AvtoperezvonPoZayavkam", false);
      context.set("VezdeKakDoma", false);

      if (!getCheckbox("OMNI") && !getCheckbox("AnalitikaProdaj")) {
        context.set("AmoBitrix", false);
      }

      context.set("IntegraciyaOtraslevie", false);

      if (
        getCheckbox("UvedomlenieOSobitiyah") === true &&
        !getCheckbox("OMNI") &&
        !getCheckbox("AR")
      ) {
        context.set("UvedomlenieOSobitiyah", false);
      }
    }
  },
  VATSPRO: (context) => {
    if (getCheckbox("VATSPRO") && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  KolvoSotrudnikovVATS: (context) => {
    const val = getNumber("KolvoSotrudnikovVATS");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }

    if (val > 0 && val < 3) {
      context.set("KolvoSotrudnikovVATS", 3);
    }

    if (
      val === 0 &&
      getNumber("KolvoSIPTrankov") === 0 &&
      getNumber("KolvoSIPURI") === 0 &&
      getNumber("KolvoSIPAkkauntov") === 0 &&
      getCheckbox("VATS") === true
    ) {
      context.set("VATS", false);
    }
  },
  DlitelnostHraneniyaVATS: (context) => {
    const val = document.getElementById("DlitelnostHraneniyaVATS")?.value;
    if (val !== "0" && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
    if (val === "0" && getCheckbox("VATS")) {
      context.select("DlitelnostHraneniyaVATS", "1 –Ω–µ–¥–µ–ª—è");
    }
  },
  LiniyGrupovogoVizova: (context) => {
    const val = getNumber("LiniyGrupovogoVizova");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
    if (val >= 0 && val < 3 && getCheckbox("VATS")) {
      context.set("LiniyGrupovogoVizova", 3);
    }
  },
  LiniyIshodyashihZvonkov: (context) => {
    const val = getNumber("LiniyIshodyashihZvonkov");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
    if (val >= 0 && val < 30 && getCheckbox("VATS")) {
      context.set("LiniyIshodyashihZvonkov", 30);
    }
  },
  KolvoSIPTrankov: (context) => {
    const val = getNumber("KolvoSIPTrankov");
    const kanalnost = document.getElementById("KanalnostSIPTrankov")?.value;
    if (val > 0) {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (parseInt(kanalnost, 10) < 30) {
        context.select("KanalnostSIPTrankov", "30");
      }
    }
    if (
      val === 0 &&
      getNumber("KolvoSotrudnikovVATS") === 0 &&
      getNumber("KolvoSIPURI") === 0 &&
      getNumber("KolvoSIPAkkauntov") === 0 &&
      getCheckbox("VATS") === true
    ) {
      context.set("VATS", false);
    }
    if (val === 0 && kanalnost !== "0") {
      context.select("KanalnostSIPTrankov", "0");
    }
  },
  KanalnostSIPTrankov: (context) => {
    const val = document.getElementById("KanalnostSIPTrankov")?.value;
    if (val !== "0") {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (getNumber("KolvoSIPTrankov") === 0) {
        context.set("KolvoSIPTrankov", 1);
      }
    } else {
      if (getNumber("KolvoSIPTrankov") !== 0) {
        context.set("KolvoSIPTrankov", 0);
      }
    }
  },
  KolvoSIPURI: (context) => {
    const val = getNumber("KolvoSIPURI");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
    if (
      val === 0 &&
      getNumber("KolvoSotrudnikovVATS") === 0 &&
      getNumber("KolvoSIPTrankov") === 0 &&
      getNumber("KolvoSIPAkkauntov") === 0 &&
      getCheckbox("VATS") === true
    ) {
      context.set("VATS", false);
    }
  },
  KolvoSIPAkkauntov: (context) => {
    const val = getNumber("KolvoSIPAkkauntov");
    const kanalnost = document.getElementById("KanalnostSIPAkkauntov")?.value;
    if (val > 0) {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (parseInt(kanalnost, 10) < 30) {
        context.select("KanalnostSIPAkkauntov", "30");
      }
    }
    if (
      val === 0 &&
      getNumber("KolvoSotrudnikovVATS") === 0 &&
      getNumber("KolvoSIPURI") === 0 &&
      getNumber("KolvoSIPTrankov") === 0 &&
      getCheckbox("VATS") === true
    ) {
      context.set("VATS", false);
    }
    if (val === 0 && kanalnost !== "0") {
      context.select("KanalnostSIPAkkauntov", "0");
    }
  },
  KanalnostSIPAkkauntov: (context) => {
    const val = document.getElementById("KanalnostSIPAkkauntov")?.value;
    if (val !== "0") {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (getNumber("KolvoSIPAkkauntov") === 0) {
        context.set("KolvoSIPAkkauntov", 1);
      }
    } else {
      if (getNumber("KolvoSIPAkkauntov") !== 0) {
        context.set("KolvoSIPAkkauntov", 0);
      }
    }
  },
  NomeraVATS: (context) => {
    const val = getNumber("NomeraVATS");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  NomeraVATS8800: (context) => {
    const val = getNumber("NomeraVATS8800");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  KolvoSvoihNomerov: (context) => {
    const val = getNumber("KolvoSvoihNomerov");
    if (val > 0 && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  KolvoFMC: (context) => {
    const val = getNumber("KolvoFMC");
    if (val > 0) {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      const tarif = document.getElementById("TarifFMC")?.value;
      if (tarif === "–Ω–µ—Ç") {
        const options = document.getElementById("TarifFMC")?.options;
        if (options?.length > 1) {
          context.select("TarifFMC", options[1].value);
        }
      }
    } else {
      if (document.getElementById("TarifFMC")?.value !== "–Ω–µ—Ç") {
        context.select("TarifFMC", "–Ω–µ—Ç");
      }
      if (document.getElementById("RegionDostavki")?.value !== "–Ω–µ—Ç") {
        context.select("RegionDostavki", "–Ω–µ—Ç");
      }
    }
  },
  TarifFMC: (context) => {
    const val = document.getElementById("TarifFMC")?.value;
    if (val && val !== "–Ω–µ—Ç") {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (getNumber("KolvoFMC") === 0) {
        context.set("KolvoFMC", 1);
      }
    } else {
      if (getNumber("KolvoFMC") !== 0) {
        context.set("KolvoFMC", 0);
      }
      if (document.getElementById("RegionDostavki")?.value !== "–Ω–µ—Ç") {
        context.select("RegionDostavki", "–Ω–µ—Ç");
      }
    }
  },
  RegionDostavki: (context) => {
    const val = document.getElementById("RegionDostavki")?.value;
    if (val && val !== "–Ω–µ—Ç") {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (getNumber("KolvoFMC") === 0) {
        context.set("KolvoFMC", 1);
      }
      const tarif = document.getElementById("TarifFMC")?.value;
      if (tarif === "–Ω–µ—Ç") {
        const options = document.getElementById("TarifFMC")?.options;
        if (options?.length > 1) {
          context.select("TarifFMC", options[1].value);
        }
      }
    }
  },
  OMNI: (context) => {
    const val = getCheckbox("OMNI");
    if (val === true) {
      if (getNumber("KolvoSotrudnikovOMNI") < 3) {
        context.set("KolvoSotrudnikovOMNI", 3);
      }
      if (!getCheckbox("TgVkAvito")) {
        context.set("TgVkAvito", true);
      }
      if (!getCheckbox("OMNIKnopka")) {
        context.set("OMNIKnopka", true);
      }
    } else {
      context.set("KolvoSotrudnikovOMNI", 0);
      context.set("KolvoWA", 0);
      context.set("KolvoWABA", 0);
      context.set("TgVkAvito", false);
      context.set("OMNIKnopka", false);

      if (!getCheckbox("VATS") && !getCheckbox("AnalitikaProdaj")) {
        context.set("AmoBitrix", false);
      }
if (!getCheckbox("VATS") && !getCheckbox("AR")) {
    	context.set("UvedomlenieOSobitiyah", false);
  	}
    }
  },
  KolvoSotrudnikovOMNI: (context) => {
    const val = getNumber("KolvoSotrudnikovOMNI");
    if (val > 0) {
      if (!getCheckbox("OMNI")) {
        context.set("OMNI", true);
      }
      if (val < 3) {
        context.set("KolvoSotrudnikovOMNI", 3);
      }
    }
    if (val === 0 && getCheckbox("OMNI")) {
      context.set("OMNI", false);
    }
  },
  KolvoWA: (context) => {
    if (getNumber("KolvoWA") > 0 && !getCheckbox("OMNI")) {
      context.set("OMNI", true);
    }
  },
  KolvoWABA: (context) => {
    if (getNumber("KolvoWABA") > 0 && !getCheckbox("OMNI")) {
      context.set("OMNI", true);
    }
  },
  TgVkAvito: (context) => {
    if (getCheckbox("TgVkAvito") && !getCheckbox("OMNI")) {
      context.set("OMNI", true);
    }
  },
  OMNIKnopka: (context) => {
    if (getCheckbox("OMNIKnopka") && !getCheckbox("OMNI")) {
      context.set("OMNI", true);
    }
  },
  AR: (context) => {
    if (getCheckbox("AR")) {
      if (getNumber("KolvoSaitov") === 0) {
        context.set("KolvoSaitov", 1);
      }
      context.select("KolvoPolzovatelskihIstochnikov", "50");
      context.select("PaketTrafika", "10000");
    } else {
      context.set("KolvoSaitov", 0);
      context.select("KolvoPolzovatelskihIstochnikov", "0");
      context.select("PaketTrafika", "0");
      context.select("EmailTreking", "–Ω–µ—Ç");

      context.set("KT", false);
      context.set("NomeraKT", 0);
      context.set("NomeraKT8800", 0);
      context.set("DlitelnostHraneniyaAR", "0");
      context.set("KonstruktorOtchetov", false);
      context.set("AnalitikaProdaj", false);
      context.set("IntegraciyaSVidjetami", false);
      context.set("AvtoperezvonPoZayavkam", false);
      if (!getCheckbox("VATS") && !getCheckbox("OMNI")) {
        context.set("UvedomlenieOSobitiyah", false);
      }
    }
  },
  KolvoSaitov: (context) => {
    if (getNumber("KolvoSaitov") > 0 && !getCheckbox("AR")) {
      context.set("AR", true);
    }
  },
KolvoPolzovatelskihIstochnikov: (context) => {
  const val = document.getElementById("KolvoPolzovatelskihIstochnikov")?.value;
  if (val && val !== "0" && !getCheckbox("AR")) {
    context.set("AR", true);
  }
},
  PaketTrafika: (context) => {
    const val = document.getElementById("PaketTrafika")?.value;
    if (val && val !== "0" && !getCheckbox("AR")) {
      context.set("AR", true);
    }
  },
  KT: (context) => {
    const val = getCheckbox("KT");
    if (val === true && !getCheckbox("AR")) {
      context.set("AR", true);
    }
    if (val === false) {
      context.set("NomeraKT", 0);
      context.set("NomeraKT8800", 0);
      context.select("DlitelnostHraneniyaAR", "0");
    }
  },
  NomeraKT: (context) => {
    if (getNumber("NomeraKT") > 0 && !getCheckbox("KT")) {
      context.set("KT", true);
    }
  },
  NomeraKT8800: (context) => {
    if (getNumber("NomeraKT8800") > 0 && !getCheckbox("KT")) {
      context.set("KT", true);
    }
  },
  DlitelnostHraneniyaAR: (context) => {
    const val = document.getElementById("DlitelnostHraneniyaAR")?.value;
    if (val !== "0" && !getCheckbox("KT")) {
      context.set("KT", true);
    }
    if (val === "0" && getCheckbox("KT")) {
      context.select("DlitelnostHraneniyaAR", "1 –Ω–µ–¥–µ–ª—è");
    }
  },
  EmailTreking: (context) => {
    const val = document.getElementById("EmailTreking")?.value;
    if (val && val !== "–Ω–µ—Ç" && !getCheckbox("AR")) {
      context.set("AR", true);
    }
  },
  KonstruktorOtchetov: (context) => {
    if (getCheckbox("KonstruktorOtchetov") && !getCheckbox("AR")) {
      context.set("AR", true);
    }
  },
  AnalitikaProdaj: (context) => {
    if (getCheckbox("AnalitikaProdaj")) {
      if (!getCheckbox("AR")) {
        context.set("AR", true);
      }
      if (!getCheckbox("AmoBitrix")) {
        context.set("AmoBitrix", true);
      }
    } else {
      if (!getCheckbox("OMNI") && !getCheckbox("VATS")) {
        context.set("AmoBitrix", false);
      }
    }
  },
  IntegraciyaSVidjetami: (context) => {
    if (getCheckbox("IntegraciyaSVidjetami") && !getCheckbox("AR")) {
      context.set("AR", true);
    }
  },
  IntegraciyaOtraslevie: (context) => {
    if (getCheckbox("IntegraciyaOtraslevie") && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  VneshnieATS: (context) => {
    if (getCheckbox("VneshnieATS") && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  AmoBitrix: (context) => {
    if (getCheckbox("AmoBitrix")) {
      if (!getCheckbox("VATS") && !getCheckbox("OMNI") && !getCheckbox("AnalitikaProdaj")) {
        context.set("VATS", true);
      }
    } else {
      if (getCheckbox("AnalitikaProdaj")) {
        context.set("AnalitikaProdaj", false);
      }
    }
  },
  VezdeKakDoma: (context) => {
    if (getCheckbox("VezdeKakDoma") && !getCheckbox("VATS")) {
      context.set("VATS", true);
    }
  },
  UvedomlenieOSobitiyah: (context) => {
    if (getCheckbox("UvedomlenieOSobitiyah")) {
      if (getCheckbox("SpasenieKommunikatsiy")) {
        context.set("UvedomlenieOSobitiyah", false);
      } else if (!getCheckbox("VATS") && !getCheckbox("OMNI") && !getCheckbox("AR")) {
        context.set("VATS", true);
      }
    }
  },
  SpasenieKommunikatsiy: (context) => {
    if (getCheckbox("SpasenieKommunikatsiy")) {
	document.getElementById('UvedomlenieOSobitiyah').disabled = true;
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (getCheckbox("UvedomlenieOSobitiyah")) {
        context.set("UvedomlenieOSobitiyah", false);
      }
    } else {document.getElementById('UvedomlenieOSobitiyah').disabled = false;}
  },
  AvtoperezvonPoZayavkam: (context) => {
    if (getCheckbox("AvtoperezvonPoZayavkam")) {
      if (!getCheckbox("VATS")) {
        context.set("VATS", true);
      }
      if (!getCheckbox("AR")) {
        context.set("AR", true);
      }
    }
  },

};
document.getElementById("toggle-analytics").addEventListener("click", function () {
  const block = document.getElementById("block-ar");
  const toggle = document.getElementById("toggle-analytics");
  if (block.style.display === "none") {
    block.style.display = "block";
    toggle.textContent = "(—Å–∫—Ä—ã—Ç—å)";
  } else {
    block.style.display = "none";
    toggle.textContent = "(–ø–æ–∫–∞–∑–∞—Ç—å)";
  }
});

  </script>
</body>
</html>
